#!/bin/sh
set -e

cd "$(dirname "$0")/.."
ROOT=$(pwd)

if [ -z "$VENV_NAME" ]; then
    VENV_NAME="env"
fi

if [ -z "$CI" ]; then
  ACTIVATE="$VENV_NAME/bin/activate"
  if [ ! -f "$ACTIVATE" ]; then
      echo "$ACTIVATE does not exist, run ./script/bootstrap" >&2
      exit 1
  fi
  . "$ACTIVATE"
fi

SOURCES="*.py octodns/*.py octodns/*/*.py tests/*.py"

pep8 --ignore=E221,E241,E251 $SOURCES
pyflakes $SOURCES
